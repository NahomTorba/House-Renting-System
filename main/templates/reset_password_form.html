{% load static %} 
<!DOCTYPE html>

<html lang="en"> 

 <head> 

  <meta charset="UTF-8"> 

  <title>Delala - Login Form</title>

  <link rel="stylesheet" href="{% static 'website/css/style1.css' %}"> 

  <link href="{% static 'website/img/icon-deal.png' %}" rel="icon">

  <style>
    .error-list {
        color: red;
        font-size: 0.9rem;
        list-style-type: none;
        margin: 0;
        padding: 0;
    }
</style>

 </head> 

 <body> 

  <section> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> 

   <div class="signin"> 

    <div class="content"> 

     <h2>Update Password</h2> 

     <form class="form" method="post" action=""> 
      {% csrf_token %}
      <div class="inputBox"> 
        <input type="password" name="new_password1" id="id_new_password1" required> 
        <i>Password</i>
        <ul id="password1-errors" class="error-list"></ul> 
        {% if form.new_password1.errors %}
                <ul class="error-list">
                    {% for error in form.new_password1.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
    </div> 

    <div class="inputBox"> 
        <input type="password" name="new_password2" id="id_new_password2" required> 
        <i>Confirm Password</i>
        <ul id="password2-errors" class="error-list"></ul>
        {% if form.new_password2.errors %}
                <ul class="error-list">
                    {% for error in form.new_password2.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %} 
    </div>
      
      <div class="inputBox"> 
        <input type="submit" value="Update Password"> 
      </div> 
      
    </form>

    </div> 

   </div>
   
  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const passwordInput1 = document.getElementById('id_new_password1');
        const passwordInput2 = document.getElementById('id_new_password2');
        const password1Errors = document.getElementById('password1-errors');
        const password2Errors = document.getElementById('password2-errors');

        // Function to validate the password
        function validatePassword(password) {
            const errors = [];
            if (password.length < 8) {
                errors.push("Password must be at least 8 characters long.");
            }
            if (!/\d/.test(password)) {
                errors.push("Password must include at least one number.");
            }
            if (!/[A-Z]/.test(password)) {
                errors.push("Password must include at least one uppercase letter.");
            }
            if (!/[a-z]/.test(password)) {
                errors.push("Password must include at least one lowercase letter.");
            }
            if (!/[@$!%*?&#]/.test(password)) {
                errors.push("Password must include at least one special character.");
            }
            return errors;
        }

        // Function to validate password confirmation
        function validatePasswordConfirmation(password1, password2) {
            if (password1 !== password2) {
                return ["Passwords do not match."];
            }
            return [];
        }

        // Event listener for the first password field
        passwordInput1.addEventListener('input', () => {
            const errors = validatePassword(passwordInput1.value);
            password1Errors.innerHTML = '';
            if (errors.length > 0) {
                errors.forEach(error => {
                    const li = document.createElement('li');
                    li.textContent = error;
                    password1Errors.appendChild(li);
                });
            }
        });

        // Event listener for the password confirmation field
        passwordInput2.addEventListener('input', () => {
            const errors = validatePasswordConfirmation(passwordInput1.value, passwordInput2.value);
            password2Errors.innerHTML = '';
            if (errors.length > 0) {
                errors.forEach(error => {
                    const li = document.createElement('li');
                    li.textContent = error;
                    password2Errors.appendChild(li);
                });
            }
        });
    });
  </script>

  </section> <!-- partial --> 

 </body>

</html> 
